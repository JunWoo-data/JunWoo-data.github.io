```python

import pandas as pd 
import numpy as np 

import os

import matplotlib.pyplot as plt 
import matplotlib.patches as mpatches
import seaborn as sns 
import missingno as msno 
from utils import my_histogram, make_stacked_table, my_stacked_barplot

from sklearn.experimental import enable_iterative_imputer
from sklearn.impute import IterativeImputer
```


```python
import warnings
warnings.filterwarnings('ignore')
```


```python
pd.set_option('display.max_columns', None)
```


```python
df_train = pd.read_csv("../data/df_train.csv")
df_test = pd.read_csv("../data/df_test.csv")
```

- There are 8 vital signs variables and 26 laboratory variables.
    - Vital signs
        - HR: Heart rate (beats per minute)
        - O2Sat: Pulse oximetry (%)
        - Temp: Temperature (Deg C)
        - SBP: Systolic BP (mm Hg)
        - MAP: Mean arterial pressure (mm Hg)
        - DBP: Diastolic BP (mm Hg)
        - Resp: Respiration rate (breaths per minute)
        - EtCO2: End tidal carbon dioxide (mm Hg)
    - Laboratory values
        - BaseExcess: Measure of excess bicarbonate (mmol/L)
        - HCO3: Bicarbonate (mmol/L)
        - FiO2: Fraction of inspired oxygen (%)
        - pH: N/A
        - PaCO2: Partial pressure of carbon dioxide from arterial blood (mm Hg)
        - SaO2: Oxygen saturation from arterial blood (%)
        - AST: Aspartate transaminase (IU/L)
        - BUN: Blood urea nitrogen (mg/dL)
        - Alkalinephos: Alkaline phosphatase (IU/L)
        - Calcium: (mg/dL)
        - Chloride: (mmol/L)
        - Creatinine: (mg/dL)
        - Bilirubin_direct: Bilirubin direct (mg/dL)
        - Glucose: Serum glucose (mg/dL)
        - Lactate: Lactic acid (mg/dL)
        - Magnesium: (mmol/dL)
        - Phosphate: (mg/dL)
        - Potassium: (mmol/L)
        - Bilirubin_total: Total bilirubin (mg/dL)
        - TroponinI: Troponin I (ng/mL)
        - Hct: Hematocrit (%)
        - Hgb: Hemoglobin (g/dL)
        - PTT: partial thromboplastin time (seconds)
        - WBC: Leukocyte count (count*10^3/µL)
        - Fibrinogen: (mg/dL)
        - Platelets: (count*10^3/µL)


# 1. Shock index & BUN/CR

- There are some researches that follwing features are important in predicting the sepsis (Henry, K. E., Hager, D. N., Pronovost, P. J., and Saria, S. A targeted real-time early warning score (trewscore) for septic shock. Science Translational Medicine 7, 299 (2015), 299ra122–299ra122.):
    - ShockIndex(t) = $\frac{\text{HR(t)}}{SBP(t)}$
    - BUN/CR(t) = $\frac{\text{BUN(t)}}{Creatinine(t)}$

- Let's make these features.


```python
df_train["ShockIndex"] = df_train.HR / df_train.SBP
df_test["ShockIndex"] = df_test.HR / df_test.SBP

df_train["BUN/CR"] = df_train.BUN / df_train.Creatinine
df_test["BUN/CR"] = df_test.BUN / df_test.Creatinine

```

# 2. Measurement time

- Let's incorporate the measurment time information of each variables:
    - Beginning time: Time of the first measurment
    - End time: Time of the last measurment
    - Frequency: Ratio between the total number of the measurment and the maximum hour of the patient


```python
target_col_list = ['BUN', 'Creatinine', 'DBP', 'HR', 'Hct', 'Hgb',
                   'MAP', 'Magnesium', 'O2Sat', 'Phosphate', 'Platelets',
                   'Potassium', 'Resp', 'SBP', 'Temp', 'WBC', 'BaseExcess', 'Chloride',
                   'FiO2', 'Glucose', 'HCO3', 'PaCO2', 'SaO2', 'pH', 'Calcium',
                   'Fibrinogen', 'Lactate', 'PTT', 'TroponinI', 'AST', 'Alkalinephos',
                   'Bilirubin_total', 'EtCO2', 'Bilirubin_direct', 'ShockIndex','BUN/CR']
```


```python
df_train_measurment_time_info = df_train[["ID"]].drop_duplicates()
df_test_measurment_time_info = df_test[["ID"]].drop_duplicates()
```


```python
for target_col in target_col_list:
    begin_time = df_train[~df_train[target_col].isna()].groupby("ID").Hour.min().reset_index()
    end_time = df_train[~df_train[target_col].isna()].groupby("ID").Hour.max().reset_index()
    freq = (df_train[~df_train[target_col].isna()].groupby("ID").Hour.count() / df_train.groupby("ID").Hour.count()).reset_index()
    
    df_train_measurment_time_info = df_train_measurment_time_info.merge(begin_time.rename(columns = {"Hour": f"{target_col}_beg_time"}), how = "left", on = "ID") \
                                                                 .merge(end_time.rename(columns = {"Hour": f"{target_col}_end_time"}), how = "left", on = "ID") \
                                                                 .merge(freq.rename(columns = {"Hour": f"{target_col}_freq"}), how = "left", on = "ID") 
                                                      

```


```python
for target_col in target_col_list:
    begin_time = df_test[~df_test[target_col].isna()].groupby("ID").Hour.min().reset_index()
    end_time = df_test[~df_test[target_col].isna()].groupby("ID").Hour.max().reset_index()
    freq = (df_test[~df_test[target_col].isna()].groupby("ID").Hour.count() / df_test.groupby("ID").Hour.count()).reset_index()
    
    df_test_measurment_time_info = df_test_measurment_time_info.merge(begin_time.rename(columns = {"Hour": f"{target_col}_beg_time"}), how = "left", on = "ID") \
                                                               .merge(end_time.rename(columns = {"Hour": f"{target_col}_end_time"}), how = "left", on = "ID") \
                                                               .merge(freq.rename(columns = {"Hour": f"{target_col}_freq"}), how = "left", on = "ID")

```

- Also merge the information that shows how long each patient has stayed (the maximum hour of each patient).


```python
df_train_measurment_time_info = df_train_measurment_time_info.merge(df_train.groupby("ID").Hour.count().reset_index().rename(columns = {"Hour": "length_of_stay"}),
                                                                    how = "left", on = "ID")
```


```python
df_test_measurment_time_info = df_test_measurment_time_info.merge(df_test.groupby("ID").Hour.count().reset_index().rename(columns = {"Hour": "length_of_stay"}),
                                                                  how = "left", on = "ID")
```


```python
df_train_measurment_time_info
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>BUN_beg_time</th>
      <th>BUN_end_time</th>
      <th>BUN_freq</th>
      <th>Creatinine_beg_time</th>
      <th>Creatinine_end_time</th>
      <th>Creatinine_freq</th>
      <th>DBP_beg_time</th>
      <th>DBP_end_time</th>
      <th>DBP_freq</th>
      <th>HR_beg_time</th>
      <th>HR_end_time</th>
      <th>HR_freq</th>
      <th>Hct_beg_time</th>
      <th>Hct_end_time</th>
      <th>Hct_freq</th>
      <th>Hgb_beg_time</th>
      <th>Hgb_end_time</th>
      <th>Hgb_freq</th>
      <th>MAP_beg_time</th>
      <th>MAP_end_time</th>
      <th>MAP_freq</th>
      <th>Magnesium_beg_time</th>
      <th>Magnesium_end_time</th>
      <th>Magnesium_freq</th>
      <th>O2Sat_beg_time</th>
      <th>O2Sat_end_time</th>
      <th>O2Sat_freq</th>
      <th>Phosphate_beg_time</th>
      <th>Phosphate_end_time</th>
      <th>Phosphate_freq</th>
      <th>Platelets_beg_time</th>
      <th>Platelets_end_time</th>
      <th>Platelets_freq</th>
      <th>Potassium_beg_time</th>
      <th>Potassium_end_time</th>
      <th>Potassium_freq</th>
      <th>Resp_beg_time</th>
      <th>Resp_end_time</th>
      <th>Resp_freq</th>
      <th>SBP_beg_time</th>
      <th>SBP_end_time</th>
      <th>SBP_freq</th>
      <th>Temp_beg_time</th>
      <th>Temp_end_time</th>
      <th>Temp_freq</th>
      <th>WBC_beg_time</th>
      <th>WBC_end_time</th>
      <th>WBC_freq</th>
      <th>BaseExcess_beg_time</th>
      <th>BaseExcess_end_time</th>
      <th>BaseExcess_freq</th>
      <th>Chloride_beg_time</th>
      <th>Chloride_end_time</th>
      <th>Chloride_freq</th>
      <th>FiO2_beg_time</th>
      <th>FiO2_end_time</th>
      <th>FiO2_freq</th>
      <th>Glucose_beg_time</th>
      <th>Glucose_end_time</th>
      <th>Glucose_freq</th>
      <th>HCO3_beg_time</th>
      <th>HCO3_end_time</th>
      <th>HCO3_freq</th>
      <th>PaCO2_beg_time</th>
      <th>PaCO2_end_time</th>
      <th>PaCO2_freq</th>
      <th>SaO2_beg_time</th>
      <th>SaO2_end_time</th>
      <th>SaO2_freq</th>
      <th>pH_beg_time</th>
      <th>pH_end_time</th>
      <th>pH_freq</th>
      <th>Calcium_beg_time</th>
      <th>Calcium_end_time</th>
      <th>Calcium_freq</th>
      <th>Fibrinogen_beg_time</th>
      <th>Fibrinogen_end_time</th>
      <th>Fibrinogen_freq</th>
      <th>Lactate_beg_time</th>
      <th>Lactate_end_time</th>
      <th>Lactate_freq</th>
      <th>PTT_beg_time</th>
      <th>PTT_end_time</th>
      <th>PTT_freq</th>
      <th>TroponinI_beg_time</th>
      <th>TroponinI_end_time</th>
      <th>TroponinI_freq</th>
      <th>AST_beg_time</th>
      <th>AST_end_time</th>
      <th>AST_freq</th>
      <th>Alkalinephos_beg_time</th>
      <th>Alkalinephos_end_time</th>
      <th>Alkalinephos_freq</th>
      <th>Bilirubin_total_beg_time</th>
      <th>Bilirubin_total_end_time</th>
      <th>Bilirubin_total_freq</th>
      <th>EtCO2_beg_time</th>
      <th>EtCO2_end_time</th>
      <th>EtCO2_freq</th>
      <th>Bilirubin_direct_beg_time</th>
      <th>Bilirubin_direct_end_time</th>
      <th>Bilirubin_direct_freq</th>
      <th>ShockIndex_beg_time</th>
      <th>ShockIndex_end_time</th>
      <th>ShockIndex_freq</th>
      <th>BUN/CR_beg_time</th>
      <th>BUN/CR_end_time</th>
      <th>BUN/CR_freq</th>
      <th>length_of_stay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.045455</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>11.0</td>
      <td>18.0</td>
      <td>0.181818</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.863636</td>
      <td>5.0</td>
      <td>23.0</td>
      <td>0.409091</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>0.090909</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>17.0</td>
      <td>0.090909</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>0.045455</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>0.090909</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.863636</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.045455</td>
      <td>22</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.051724</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.051724</td>
      <td>2.0</td>
      <td>41.0</td>
      <td>0.568966</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.862069</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.137931</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.137931</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.896552</td>
      <td>8.0</td>
      <td>48.0</td>
      <td>0.086207</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.620690</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>0.017241</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.086207</td>
      <td>8.0</td>
      <td>48.0</td>
      <td>0.172414</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.879310</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.879310</td>
      <td>4.0</td>
      <td>56.0</td>
      <td>0.500000</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.068966</td>
      <td>9.0</td>
      <td>40.0</td>
      <td>0.189655</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.051724</td>
      <td>22.0</td>
      <td>25.0</td>
      <td>0.051724</td>
      <td>8.0</td>
      <td>48.0</td>
      <td>0.189655</td>
      <td>15.0</td>
      <td>22.0</td>
      <td>0.034483</td>
      <td>9.0</td>
      <td>40.0</td>
      <td>0.189655</td>
      <td>22.0</td>
      <td>40.0</td>
      <td>0.120690</td>
      <td>9.0</td>
      <td>40.0</td>
      <td>0.189655</td>
      <td>8.0</td>
      <td>48.0</td>
      <td>0.051724</td>
      <td>15.0</td>
      <td>21.0</td>
      <td>0.034483</td>
      <td>9.0</td>
      <td>25.0</td>
      <td>0.086207</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.068966</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.827586</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.051724</td>
      <td>58</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.947368</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.868421</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.921053</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.894737</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.947368</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.868421</td>
      <td>3.0</td>
      <td>35.0</td>
      <td>0.184211</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>32.0</td>
      <td>0.184211</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>27.0</td>
      <td>27.0</td>
      <td>0.026316</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.789474</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>38</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.902985</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.940299</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.955224</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.880597</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.037313</td>
      <td>31.0</td>
      <td>124.0</td>
      <td>0.029851</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.067164</td>
      <td>3.0</td>
      <td>134.0</td>
      <td>0.917910</td>
      <td>2.0</td>
      <td>133.0</td>
      <td>0.917910</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.231343</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>48.0</td>
      <td>133.0</td>
      <td>0.097015</td>
      <td>6.0</td>
      <td>130.0</td>
      <td>0.186567</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>39.0</td>
      <td>133.0</td>
      <td>0.104478</td>
      <td>31.0</td>
      <td>133.0</td>
      <td>0.104478</td>
      <td>31.0</td>
      <td>133.0</td>
      <td>0.104478</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.059701</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>72.0</td>
      <td>83.0</td>
      <td>0.022388</td>
      <td>6.0</td>
      <td>6.0</td>
      <td>0.007463</td>
      <td>6.0</td>
      <td>86.0</td>
      <td>0.014925</td>
      <td>6.0</td>
      <td>6.0</td>
      <td>0.007463</td>
      <td>6.0</td>
      <td>6.0</td>
      <td>0.007463</td>
      <td>6.0</td>
      <td>6.0</td>
      <td>0.007463</td>
      <td>46.0</td>
      <td>134.0</td>
      <td>0.641791</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>133.0</td>
      <td>0.880597</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>134</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>50.0</td>
      <td>0.803922</td>
      <td>3.0</td>
      <td>22.0</td>
      <td>0.058824</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>2.0</td>
      <td>49.0</td>
      <td>0.803922</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>2.0</td>
      <td>50.0</td>
      <td>0.764706</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>2.0</td>
      <td>50.0</td>
      <td>0.784314</td>
      <td>2.0</td>
      <td>49.0</td>
      <td>0.784314</td>
      <td>4.0</td>
      <td>47.0</td>
      <td>0.215686</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>0.019608</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>22.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>0.019608</td>
      <td>22.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>49.0</td>
      <td>0.745098</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>51</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>15139</th>
      <td>21628</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>10.0</td>
      <td>21.0</td>
      <td>0.428571</td>
      <td>10.0</td>
      <td>36.0</td>
      <td>0.964286</td>
      <td>10.0</td>
      <td>17.0</td>
      <td>0.071429</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>10.0</td>
      <td>36.0</td>
      <td>0.857143</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>10.0</td>
      <td>36.0</td>
      <td>0.892857</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>10.0</td>
      <td>17.0</td>
      <td>0.071429</td>
      <td>10.0</td>
      <td>36.0</td>
      <td>0.928571</td>
      <td>10.0</td>
      <td>20.0</td>
      <td>0.392857</td>
      <td>10.0</td>
      <td>35.0</td>
      <td>0.250000</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>10.0</td>
      <td>17.0</td>
      <td>0.071429</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>10.0</td>
      <td>20.0</td>
      <td>0.392857</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>28</td>
    </tr>
    <tr>
      <th>15140</th>
      <td>21629</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.857143</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.839286</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.053571</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.053571</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.821429</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>0.017857</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.821429</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>3.0</td>
      <td>39.0</td>
      <td>0.089286</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.839286</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.803571</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.482143</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>9.0</td>
      <td>0.053571</td>
      <td>2.0</td>
      <td>44.0</td>
      <td>0.410714</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>9.0</td>
      <td>0.071429</td>
      <td>3.0</td>
      <td>9.0</td>
      <td>0.071429</td>
      <td>3.0</td>
      <td>9.0</td>
      <td>0.053571</td>
      <td>3.0</td>
      <td>39.0</td>
      <td>0.107143</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>9.0</td>
      <td>0.053571</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.767857</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>56</td>
    </tr>
    <tr>
      <th>15141</th>
      <td>21630</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.930233</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.930233</td>
      <td>5.0</td>
      <td>44.0</td>
      <td>0.093023</td>
      <td>18.0</td>
      <td>44.0</td>
      <td>0.046512</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.930233</td>
      <td>5.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.883721</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>18.0</td>
      <td>44.0</td>
      <td>0.046512</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.767442</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.930233</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.906977</td>
      <td>18.0</td>
      <td>44.0</td>
      <td>0.046512</td>
      <td>4.0</td>
      <td>43.0</td>
      <td>0.139535</td>
      <td>18.0</td>
      <td>44.0</td>
      <td>0.046512</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>44.0</td>
      <td>0.162791</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>4.0</td>
      <td>43.0</td>
      <td>0.116279</td>
      <td>45.0</td>
      <td>45.0</td>
      <td>0.023256</td>
      <td>4.0</td>
      <td>43.0</td>
      <td>0.139535</td>
      <td>13.0</td>
      <td>18.0</td>
      <td>0.046512</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>13.0</td>
      <td>18.0</td>
      <td>0.046512</td>
      <td>18.0</td>
      <td>18.0</td>
      <td>0.023256</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.906977</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>43</td>
    </tr>
    <tr>
      <th>15142</th>
      <td>21632</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.071429</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.857143</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.928571</td>
      <td>5.0</td>
      <td>13.0</td>
      <td>0.285714</td>
      <td>5.0</td>
      <td>13.0</td>
      <td>0.285714</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.928571</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.857143</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.214286</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.928571</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.785714</td>
      <td>4.0</td>
      <td>14.0</td>
      <td>0.285714</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>13.0</td>
      <td>0.285714</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>14.0</td>
      <td>0.285714</td>
      <td>9.0</td>
      <td>9.0</td>
      <td>0.071429</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>10.0</td>
      <td>0.214286</td>
      <td>5.0</td>
      <td>13.0</td>
      <td>0.285714</td>
      <td>5.0</td>
      <td>13.0</td>
      <td>0.285714</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5.0</td>
      <td>8.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.071429</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>9.0</td>
      <td>9.0</td>
      <td>0.071429</td>
      <td>9.0</td>
      <td>9.0</td>
      <td>0.071429</td>
      <td>9.0</td>
      <td>9.0</td>
      <td>0.071429</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.785714</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.071429</td>
      <td>14</td>
    </tr>
    <tr>
      <th>15143</th>
      <td>21633</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>0.157895</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.894737</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.368421</td>
      <td>5.0</td>
      <td>6.0</td>
      <td>0.105263</td>
      <td>2.0</td>
      <td>18.0</td>
      <td>0.842105</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>0.157895</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.789474</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>0.157895</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.894737</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.894737</td>
      <td>3.0</td>
      <td>16.0</td>
      <td>0.263158</td>
      <td>5.0</td>
      <td>6.0</td>
      <td>0.105263</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>0.157895</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>0.157895</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.842105</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>19</td>
    </tr>
  </tbody>
</table>
<p>15144 rows × 110 columns</p>
</div>




```python
msno.matrix(df_train_measurment_time_info)
```




    <AxesSubplot:>




    
![png](2.3.EDA_vital_laboratory_files/2.3.EDA_vital_laboratory_19_1.png)
    


- Drop the variables with more than 20% missing values.


```python
target_col = df_train_measurment_time_info.isna().sum()[(df_train_measurment_time_info.isna().sum() / df_train_measurment_time_info.shape[0]) < 0.2].reset_index()["index"]
```


```python
df_train_measurment_time_info = df_train_measurment_time_info[target_col]
df_test_measurment_time_info = df_test_measurment_time_info[target_col]
```


```python
df_train_measurment_time_info
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>BUN_beg_time</th>
      <th>BUN_end_time</th>
      <th>BUN_freq</th>
      <th>Creatinine_beg_time</th>
      <th>Creatinine_end_time</th>
      <th>Creatinine_freq</th>
      <th>DBP_beg_time</th>
      <th>DBP_end_time</th>
      <th>DBP_freq</th>
      <th>HR_beg_time</th>
      <th>HR_end_time</th>
      <th>HR_freq</th>
      <th>Hct_beg_time</th>
      <th>Hct_end_time</th>
      <th>Hct_freq</th>
      <th>Hgb_beg_time</th>
      <th>Hgb_end_time</th>
      <th>Hgb_freq</th>
      <th>MAP_beg_time</th>
      <th>MAP_end_time</th>
      <th>MAP_freq</th>
      <th>Magnesium_beg_time</th>
      <th>Magnesium_end_time</th>
      <th>Magnesium_freq</th>
      <th>O2Sat_beg_time</th>
      <th>O2Sat_end_time</th>
      <th>O2Sat_freq</th>
      <th>Platelets_beg_time</th>
      <th>Platelets_end_time</th>
      <th>Platelets_freq</th>
      <th>Potassium_beg_time</th>
      <th>Potassium_end_time</th>
      <th>Potassium_freq</th>
      <th>Resp_beg_time</th>
      <th>Resp_end_time</th>
      <th>Resp_freq</th>
      <th>SBP_beg_time</th>
      <th>SBP_end_time</th>
      <th>SBP_freq</th>
      <th>Temp_beg_time</th>
      <th>Temp_end_time</th>
      <th>Temp_freq</th>
      <th>WBC_beg_time</th>
      <th>WBC_end_time</th>
      <th>WBC_freq</th>
      <th>Glucose_beg_time</th>
      <th>Glucose_end_time</th>
      <th>Glucose_freq</th>
      <th>Calcium_beg_time</th>
      <th>Calcium_end_time</th>
      <th>Calcium_freq</th>
      <th>ShockIndex_beg_time</th>
      <th>ShockIndex_end_time</th>
      <th>ShockIndex_freq</th>
      <th>BUN/CR_beg_time</th>
      <th>BUN/CR_end_time</th>
      <th>BUN/CR_freq</th>
      <th>length_of_stay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.045455</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>11.0</td>
      <td>18.0</td>
      <td>0.181818</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.909091</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.863636</td>
      <td>5.0</td>
      <td>23.0</td>
      <td>0.409091</td>
      <td>17.0</td>
      <td>18.0</td>
      <td>0.090909</td>
      <td>4.0</td>
      <td>17.0</td>
      <td>0.090909</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>24.0</td>
      <td>0.863636</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.045455</td>
      <td>22</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.051724</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.051724</td>
      <td>2.0</td>
      <td>41.0</td>
      <td>0.568966</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.862069</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.137931</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.137931</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.896552</td>
      <td>8.0</td>
      <td>48.0</td>
      <td>0.086207</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.620690</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.086207</td>
      <td>8.0</td>
      <td>48.0</td>
      <td>0.172414</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.879310</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.879310</td>
      <td>4.0</td>
      <td>56.0</td>
      <td>0.500000</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.068966</td>
      <td>8.0</td>
      <td>48.0</td>
      <td>0.189655</td>
      <td>8.0</td>
      <td>48.0</td>
      <td>0.051724</td>
      <td>2.0</td>
      <td>58.0</td>
      <td>0.827586</td>
      <td>15.0</td>
      <td>38.0</td>
      <td>0.051724</td>
      <td>58</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.947368</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.868421</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.921053</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.894737</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.947368</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.868421</td>
      <td>3.0</td>
      <td>35.0</td>
      <td>0.184211</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>4.0</td>
      <td>32.0</td>
      <td>0.184211</td>
      <td>16.0</td>
      <td>16.0</td>
      <td>0.026316</td>
      <td>2.0</td>
      <td>38.0</td>
      <td>0.789474</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>38</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.902985</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.940299</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.955224</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.880597</td>
      <td>31.0</td>
      <td>124.0</td>
      <td>0.029851</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.067164</td>
      <td>3.0</td>
      <td>134.0</td>
      <td>0.917910</td>
      <td>2.0</td>
      <td>133.0</td>
      <td>0.917910</td>
      <td>2.0</td>
      <td>134.0</td>
      <td>0.231343</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>6.0</td>
      <td>130.0</td>
      <td>0.186567</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.059701</td>
      <td>2.0</td>
      <td>133.0</td>
      <td>0.880597</td>
      <td>6.0</td>
      <td>124.0</td>
      <td>0.044776</td>
      <td>134</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>50.0</td>
      <td>0.803922</td>
      <td>3.0</td>
      <td>22.0</td>
      <td>0.058824</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>2.0</td>
      <td>49.0</td>
      <td>0.803922</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>2.0</td>
      <td>50.0</td>
      <td>0.764706</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>2.0</td>
      <td>50.0</td>
      <td>0.784314</td>
      <td>2.0</td>
      <td>49.0</td>
      <td>0.784314</td>
      <td>4.0</td>
      <td>47.0</td>
      <td>0.215686</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.058824</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>2.0</td>
      <td>49.0</td>
      <td>0.745098</td>
      <td>3.0</td>
      <td>28.0</td>
      <td>0.039216</td>
      <td>51</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>15139</th>
      <td>21628</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>10.0</td>
      <td>21.0</td>
      <td>0.428571</td>
      <td>10.0</td>
      <td>36.0</td>
      <td>0.964286</td>
      <td>10.0</td>
      <td>17.0</td>
      <td>0.071429</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>10.0</td>
      <td>36.0</td>
      <td>0.857143</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>10.0</td>
      <td>36.0</td>
      <td>0.892857</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>10.0</td>
      <td>17.0</td>
      <td>0.071429</td>
      <td>10.0</td>
      <td>36.0</td>
      <td>0.928571</td>
      <td>10.0</td>
      <td>20.0</td>
      <td>0.392857</td>
      <td>10.0</td>
      <td>35.0</td>
      <td>0.250000</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>10.0</td>
      <td>20.0</td>
      <td>0.392857</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.035714</td>
      <td>28</td>
    </tr>
    <tr>
      <th>15140</th>
      <td>21629</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.857143</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.839286</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.053571</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.053571</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.821429</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>0.017857</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.821429</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>3.0</td>
      <td>39.0</td>
      <td>0.089286</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.839286</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.803571</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.482143</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>2.0</td>
      <td>44.0</td>
      <td>0.410714</td>
      <td>3.0</td>
      <td>39.0</td>
      <td>0.107143</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>0.767857</td>
      <td>15.0</td>
      <td>39.0</td>
      <td>0.035714</td>
      <td>56</td>
    </tr>
    <tr>
      <th>15141</th>
      <td>21630</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.930233</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.930233</td>
      <td>5.0</td>
      <td>44.0</td>
      <td>0.093023</td>
      <td>18.0</td>
      <td>44.0</td>
      <td>0.046512</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.930233</td>
      <td>5.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.883721</td>
      <td>18.0</td>
      <td>44.0</td>
      <td>0.046512</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.767442</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.930233</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.906977</td>
      <td>18.0</td>
      <td>44.0</td>
      <td>0.046512</td>
      <td>4.0</td>
      <td>44.0</td>
      <td>0.162791</td>
      <td>13.0</td>
      <td>18.0</td>
      <td>0.046512</td>
      <td>4.0</td>
      <td>45.0</td>
      <td>0.906977</td>
      <td>13.0</td>
      <td>44.0</td>
      <td>0.069767</td>
      <td>43</td>
    </tr>
    <tr>
      <th>15142</th>
      <td>21632</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.071429</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.857143</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.928571</td>
      <td>5.0</td>
      <td>13.0</td>
      <td>0.285714</td>
      <td>5.0</td>
      <td>13.0</td>
      <td>0.285714</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.928571</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.857143</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.214286</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.928571</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.785714</td>
      <td>4.0</td>
      <td>14.0</td>
      <td>0.285714</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>9.0</td>
      <td>9.0</td>
      <td>0.071429</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>0.142857</td>
      <td>2.0</td>
      <td>14.0</td>
      <td>0.785714</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.071429</td>
      <td>14</td>
    </tr>
    <tr>
      <th>15143</th>
      <td>21633</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>0.157895</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.894737</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.368421</td>
      <td>5.0</td>
      <td>6.0</td>
      <td>0.105263</td>
      <td>2.0</td>
      <td>18.0</td>
      <td>0.842105</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>0.157895</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.789474</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>2.0</td>
      <td>6.0</td>
      <td>0.157895</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.894737</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.894737</td>
      <td>3.0</td>
      <td>16.0</td>
      <td>0.263158</td>
      <td>5.0</td>
      <td>6.0</td>
      <td>0.105263</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>2.0</td>
      <td>19.0</td>
      <td>0.842105</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>0.052632</td>
      <td>19</td>
    </tr>
  </tbody>
</table>
<p>15144 rows × 59 columns</p>
</div>



- We now have 110 -> 59 variables.


```python
msno.matrix(df_train_measurment_time_info)
```




    <AxesSubplot:>




    
![png](2.3.EDA_vital_laboratory_files/2.3.EDA_vital_laboratory_25_1.png)
    


- There are still some missing values. 
- Missing values means that the patient have no record in that variable. So it is reasonable to impute missing value with 0.


```python
df_train_measurment_time_info = df_train_measurment_time_info.fillna(0)
df_test_measurment_time_info = df_test_measurment_time_info.fillna(0)
```


```python
fig, axes = plt.subplots(1, 2, figsize = (12, 5))

msno.matrix(df_train_measurment_time_info, ax = axes[0])
axes[0].set_title("Train data", fontsize = 15)

msno.matrix(df_test_measurment_time_info, ax = axes[1])
axes[1].set_title("Test data", fontsize = 15)
```




    Text(0.5, 1.0, 'Test data')




    
![png](2.3.EDA_vital_laboratory_files/2.3.EDA_vital_laboratory_28_1.png)
    


- Now there is no missing value.

- Save the tables.


```python
df_train_measurment_time_info.to_csv("../data/df_train_measurment_time_info.csv", index = False)
df_test_measurment_time_info.to_csv("../data/df_test_measurment_time_info.csv", index = False)
```

# 3. Summary statistics


```python
msno.matrix(df_train.drop(["Age", "Gender", "Outcome", "ID"], axis = 1))
```




    <AxesSubplot:>




    
![png](2.3.EDA_vital_laboratory_files/2.3.EDA_vital_laboratory_33_1.png)
    


- Because each variable is recorded only when it is measured, there are many missing values.
- Since variables are measured in several time for each patient, this is the dependent dataset. That is, there are correlations between measured values from same patient.
- So let's use summary statistics like minimum, maximum, mean, median, standard deviation for each variable instead of several measured variables for each patient.

- Before extract the summary statistics, let's impute the missing values.



```python
plt.figure(figsize = (15, 5))
sns.boxplot(df_train.drop(["Age", "Gender", "Outcome"], axis = 1).groupby("ID").std(), showfliers = False)
plt.ylabel("Standard Deviation", fontsize = 12)
plt.xlabel("Variables", fontsize = 12)
plt.title("Boxplot of the standard deviation of each patient", fontsize = 15)
plt.xticks(rotation = 90)
plt.show()
```


    
![png](2.3.EDA_vital_laboratory_files/2.3.EDA_vital_laboratory_36_0.png)
    


- Above plot shows the standard deviation distribution of each patient's measurements.
- It can be seen that the standard deviation of patients for almost all variables is very low.
- That is, there is no significant change in the measurement within the same patient.
- So, let's impute the missing values by the forward filling method which assumed the measurement value remained constant until the next measurement.


```python
target_col_list = ["ID", "Hour", 'BUN', 'Creatinine', 'DBP', 'HR', 'Hct', 'Hgb',
                   'MAP', 'Magnesium', 'O2Sat', 'Phosphate', 'Platelets',
                   'Potassium', 'Resp', 'SBP', 'Temp', 'WBC', 'BaseExcess', 'Chloride',
                   'FiO2', 'Glucose', 'HCO3', 'PaCO2', 'SaO2', 'pH', 'Calcium',
                   'Fibrinogen', 'Lactate', 'PTT', 'TroponinI', 'AST', 'Alkalinephos',
                   'Bilirubin_total', 'EtCO2', 'Bilirubin_direct', 'ShockIndex','BUN/CR']
```


```python
measurement_variable_train = df_train[target_col_list].sort_values(["ID", "Hour"])
measurement_variable_test = df_test[target_col_list].sort_values(["ID", "Hour"])
```


```python
measurement_variable_train["ID_for_groupby"] = measurement_variable_train.ID
measurement_variable_test["ID_for_groupby"] = measurement_variable_test.ID

measurement_variable_train = measurement_variable_train.groupby("ID_for_groupby").transform(lambda v: v.ffill())
measurement_variable_test = measurement_variable_test.groupby("ID_for_groupby").transform(lambda v: v.ffill())

measurement_variable_train.drop("Hour", axis = 1, inplace = True)
measurement_variable_test.drop("Hour", axis = 1, inplace = True)
```


```python
msno.matrix(measurement_variable_train)
```




    <AxesSubplot:>




    
![png](2.3.EDA_vital_laboratory_files/2.3.EDA_vital_laboratory_41_1.png)
    


- Now let's extract the summary statistics of each patient.


```python
# features for train data

grouped_mean = measurement_variable_train.groupby("ID").mean()
grouped_std = measurement_variable_train.groupby("ID").std()
grouped_min = measurement_variable_train.groupby("ID").min()
grouped_max = measurement_variable_train.groupby("ID").max()

for col in grouped_mean.columns:
    grouped_mean = grouped_mean.rename(columns = {col: f"{col}_mean"})
    grouped_std = grouped_std.rename(columns = {col: f"{col}_std"})
    grouped_min = grouped_min.rename(columns = {col: f"{col}_min"})
    grouped_max = grouped_max.rename(columns = {col: f"{col}_max"})

df_train_measurement_grouped_stat = measurement_variable_train[["ID"]].drop_duplicates()
df_train_measurement_grouped_stat = df_train_measurement_grouped_stat.merge(grouped_mean, how = "left", on = "ID") \
                                                                     .merge(grouped_std, how = "left", on = "ID") \
                                                                     .merge(grouped_min, how = "left", on = "ID") \
                                                                     .merge(grouped_max, how = "left", on = "ID") 
                                                                     
```


```python
# features for test data

grouped_mean = measurement_variable_test.groupby("ID").mean()
grouped_std = measurement_variable_test.groupby("ID").std()
grouped_min = measurement_variable_test.groupby("ID").min()
grouped_max = measurement_variable_test.groupby("ID").max()

for col in grouped_mean.columns:
    grouped_mean = grouped_mean.rename(columns = {col: f"{col}_mean"})
    grouped_std = grouped_std.rename(columns = {col: f"{col}_std"})
    grouped_min = grouped_min.rename(columns = {col: f"{col}_min"})
    grouped_max = grouped_max.rename(columns = {col: f"{col}_max"})

df_test_measurment_grouped_stat = measurement_variable_test[["ID"]].drop_duplicates()
df_test_measurment_grouped_stat = df_test_measurment_grouped_stat.merge(grouped_mean, how = "left", on = "ID") \
                                                                 .merge(grouped_std, how = "left", on = "ID") \
                                                                 .merge(grouped_min, how = "left", on = "ID") \
                                                                 .merge(grouped_max, how = "left", on = "ID") 
```


```python
df_train_measurement_grouped_stat
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>BUN_mean</th>
      <th>Creatinine_mean</th>
      <th>DBP_mean</th>
      <th>HR_mean</th>
      <th>Hct_mean</th>
      <th>Hgb_mean</th>
      <th>MAP_mean</th>
      <th>Magnesium_mean</th>
      <th>O2Sat_mean</th>
      <th>Phosphate_mean</th>
      <th>Platelets_mean</th>
      <th>Potassium_mean</th>
      <th>Resp_mean</th>
      <th>SBP_mean</th>
      <th>Temp_mean</th>
      <th>WBC_mean</th>
      <th>BaseExcess_mean</th>
      <th>Chloride_mean</th>
      <th>FiO2_mean</th>
      <th>Glucose_mean</th>
      <th>HCO3_mean</th>
      <th>PaCO2_mean</th>
      <th>SaO2_mean</th>
      <th>pH_mean</th>
      <th>Calcium_mean</th>
      <th>Fibrinogen_mean</th>
      <th>Lactate_mean</th>
      <th>PTT_mean</th>
      <th>TroponinI_mean</th>
      <th>AST_mean</th>
      <th>Alkalinephos_mean</th>
      <th>Bilirubin_total_mean</th>
      <th>EtCO2_mean</th>
      <th>Bilirubin_direct_mean</th>
      <th>ShockIndex_mean</th>
      <th>BUN/CR_mean</th>
      <th>BUN_std</th>
      <th>Creatinine_std</th>
      <th>DBP_std</th>
      <th>HR_std</th>
      <th>Hct_std</th>
      <th>Hgb_std</th>
      <th>MAP_std</th>
      <th>Magnesium_std</th>
      <th>O2Sat_std</th>
      <th>Phosphate_std</th>
      <th>Platelets_std</th>
      <th>Potassium_std</th>
      <th>Resp_std</th>
      <th>SBP_std</th>
      <th>Temp_std</th>
      <th>WBC_std</th>
      <th>BaseExcess_std</th>
      <th>Chloride_std</th>
      <th>FiO2_std</th>
      <th>Glucose_std</th>
      <th>HCO3_std</th>
      <th>PaCO2_std</th>
      <th>SaO2_std</th>
      <th>pH_std</th>
      <th>Calcium_std</th>
      <th>Fibrinogen_std</th>
      <th>Lactate_std</th>
      <th>PTT_std</th>
      <th>TroponinI_std</th>
      <th>AST_std</th>
      <th>Alkalinephos_std</th>
      <th>Bilirubin_total_std</th>
      <th>EtCO2_std</th>
      <th>Bilirubin_direct_std</th>
      <th>ShockIndex_std</th>
      <th>BUN/CR_std</th>
      <th>BUN_min</th>
      <th>Creatinine_min</th>
      <th>DBP_min</th>
      <th>HR_min</th>
      <th>Hct_min</th>
      <th>Hgb_min</th>
      <th>MAP_min</th>
      <th>Magnesium_min</th>
      <th>O2Sat_min</th>
      <th>Phosphate_min</th>
      <th>Platelets_min</th>
      <th>Potassium_min</th>
      <th>Resp_min</th>
      <th>SBP_min</th>
      <th>Temp_min</th>
      <th>WBC_min</th>
      <th>BaseExcess_min</th>
      <th>Chloride_min</th>
      <th>FiO2_min</th>
      <th>Glucose_min</th>
      <th>HCO3_min</th>
      <th>PaCO2_min</th>
      <th>SaO2_min</th>
      <th>pH_min</th>
      <th>Calcium_min</th>
      <th>Fibrinogen_min</th>
      <th>Lactate_min</th>
      <th>PTT_min</th>
      <th>TroponinI_min</th>
      <th>AST_min</th>
      <th>Alkalinephos_min</th>
      <th>Bilirubin_total_min</th>
      <th>EtCO2_min</th>
      <th>Bilirubin_direct_min</th>
      <th>ShockIndex_min</th>
      <th>BUN/CR_min</th>
      <th>BUN_max</th>
      <th>Creatinine_max</th>
      <th>DBP_max</th>
      <th>HR_max</th>
      <th>Hct_max</th>
      <th>Hgb_max</th>
      <th>MAP_max</th>
      <th>Magnesium_max</th>
      <th>O2Sat_max</th>
      <th>Phosphate_max</th>
      <th>Platelets_max</th>
      <th>Potassium_max</th>
      <th>Resp_max</th>
      <th>SBP_max</th>
      <th>Temp_max</th>
      <th>WBC_max</th>
      <th>BaseExcess_max</th>
      <th>Chloride_max</th>
      <th>FiO2_max</th>
      <th>Glucose_max</th>
      <th>HCO3_max</th>
      <th>PaCO2_max</th>
      <th>SaO2_max</th>
      <th>pH_max</th>
      <th>Calcium_max</th>
      <th>Fibrinogen_max</th>
      <th>Lactate_max</th>
      <th>PTT_max</th>
      <th>TroponinI_max</th>
      <th>AST_max</th>
      <th>Alkalinephos_max</th>
      <th>Bilirubin_total_max</th>
      <th>EtCO2_max</th>
      <th>Bilirubin_direct_max</th>
      <th>ShockIndex_max</th>
      <th>BUN/CR_max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>12.166250</td>
      <td>0.700000</td>
      <td>58.893333</td>
      <td>89.970476</td>
      <td>27.213571</td>
      <td>9.070000</td>
      <td>75.272381</td>
      <td>NaN</td>
      <td>97.984762</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.471250</td>
      <td>15.700476</td>
      <td>115.151905</td>
      <td>36.694000</td>
      <td>8.036250</td>
      <td>0.990000</td>
      <td>107.468750</td>
      <td>0.400000</td>
      <td>125.801429</td>
      <td>25.825000</td>
      <td>37.500000</td>
      <td>99.281429</td>
      <td>7.443333</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.789651</td>
      <td>16.942857</td>
      <td>0.123744</td>
      <td>0.000000</td>
      <td>8.480952</td>
      <td>4.234100</td>
      <td>1.497745</td>
      <td>0.056569</td>
      <td>7.690843</td>
      <td>NaN</td>
      <td>1.062688</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.003536</td>
      <td>1.964122</td>
      <td>10.043408</td>
      <td>0.491993</td>
      <td>0.045962</td>
      <td>0.000000</td>
      <td>0.003536</td>
      <td>0.000000</td>
      <td>15.032899</td>
      <td>0.014142</td>
      <td>0.000000</td>
      <td>0.635014</td>
      <td>0.030551</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.088723</td>
      <td>0.000000</td>
      <td>11.86</td>
      <td>0.70</td>
      <td>46.93</td>
      <td>74.78</td>
      <td>25.96</td>
      <td>9.05</td>
      <td>60.12</td>
      <td>NaN</td>
      <td>95.93</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.47</td>
      <td>11.41</td>
      <td>99.02</td>
      <td>35.61</td>
      <td>8.02</td>
      <td>0.99</td>
      <td>107.46</td>
      <td>0.40</td>
      <td>107.10</td>
      <td>25.79</td>
      <td>37.50</td>
      <td>96.51</td>
      <td>7.31</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.614563</td>
      <td>16.942857</td>
      <td>12.21</td>
      <td>0.70</td>
      <td>79.91</td>
      <td>95.72</td>
      <td>28.89</td>
      <td>9.21</td>
      <td>90.60</td>
      <td>NaN</td>
      <td>100.06</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.48</td>
      <td>19.98</td>
      <td>132.76</td>
      <td>37.41</td>
      <td>8.15</td>
      <td>0.99</td>
      <td>107.47</td>
      <td>0.40</td>
      <td>137.31</td>
      <td>25.83</td>
      <td>37.50</td>
      <td>99.42</td>
      <td>7.45</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.966673</td>
      <td>16.942857</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>9.179091</td>
      <td>0.563636</td>
      <td>67.792982</td>
      <td>82.789474</td>
      <td>30.123636</td>
      <td>10.530909</td>
      <td>76.083684</td>
      <td>2.531176</td>
      <td>96.276842</td>
      <td>3.800000</td>
      <td>212.173636</td>
      <td>4.121765</td>
      <td>17.965439</td>
      <td>120.228070</td>
      <td>36.999636</td>
      <td>11.948864</td>
      <td>2.123000</td>
      <td>109.641136</td>
      <td>0.412973</td>
      <td>126.724314</td>
      <td>25.850455</td>
      <td>44.505600</td>
      <td>78.998108</td>
      <td>7.408200</td>
      <td>8.430196</td>
      <td>175.62</td>
      <td>1.464400</td>
      <td>37.180909</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.701669</td>
      <td>16.400303</td>
      <td>2.111585</td>
      <td>0.048661</td>
      <td>21.534443</td>
      <td>14.053193</td>
      <td>3.011037</td>
      <td>1.034972</td>
      <td>10.881973</td>
      <td>0.383639</td>
      <td>1.951691</td>
      <td>0.000000</td>
      <td>29.228191</td>
      <td>0.386175</td>
      <td>5.022348</td>
      <td>15.108003</td>
      <td>0.789538</td>
      <td>2.762756</td>
      <td>2.146345</td>
      <td>6.127336</td>
      <td>0.084422</td>
      <td>32.436454</td>
      <td>1.442959</td>
      <td>4.729308</td>
      <td>15.239642</td>
      <td>0.033178</td>
      <td>0.122466</td>
      <td>36.734541</td>
      <td>0.664272</td>
      <td>12.378049</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.165108</td>
      <td>3.771555</td>
      <td>7.72</td>
      <td>0.50</td>
      <td>34.82</td>
      <td>60.35</td>
      <td>24.46</td>
      <td>8.05</td>
      <td>52.87</td>
      <td>2.00</td>
      <td>91.13</td>
      <td>3.80</td>
      <td>177.48</td>
      <td>3.61</td>
      <td>9.64</td>
      <td>91.85</td>
      <td>35.80</td>
      <td>6.82</td>
      <td>-2.86</td>
      <td>104.39</td>
      <td>0.39</td>
      <td>50.39</td>
      <td>25.23</td>
      <td>31.13</td>
      <td>65.03</td>
      <td>7.37</td>
      <td>8.21</td>
      <td>161.19</td>
      <td>0.88</td>
      <td>23.81</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.494388</td>
      <td>12.866667</td>
      <td>13.76</td>
      <td>0.60</td>
      <td>97.18</td>
      <td>111.08</td>
      <td>40.50</td>
      <td>13.51</td>
      <td>109.62</td>
      <td>3.11</td>
      <td>100.17</td>
      <td>3.80</td>
      <td>281.18</td>
      <td>5.04</td>
      <td>34.05</td>
      <td>160.07</td>
      <td>38.28</td>
      <td>13.94</td>
      <td>12.85</td>
      <td>117.54</td>
      <td>0.75</td>
      <td>169.06</td>
      <td>29.13</td>
      <td>49.32</td>
      <td>98.44</td>
      <td>7.51</td>
      <td>8.51</td>
      <td>267.01</td>
      <td>3.63</td>
      <td>52.77</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.118672</td>
      <td>22.933333</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4</td>
      <td>NaN</td>
      <td>0.750000</td>
      <td>77.953514</td>
      <td>106.853243</td>
      <td>42.500000</td>
      <td>14.200000</td>
      <td>104.294324</td>
      <td>NaN</td>
      <td>95.424054</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.200000</td>
      <td>23.717297</td>
      <td>146.205676</td>
      <td>36.891944</td>
      <td>15.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>212.999143</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>9.300000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.07</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.726613</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>9.103789</td>
      <td>8.915002</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>7.853111</td>
      <td>NaN</td>
      <td>1.396676</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>6.562330</td>
      <td>12.773692</td>
      <td>0.320114</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>63.719123</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.075166</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.75</td>
      <td>62.68</td>
      <td>85.62</td>
      <td>42.50</td>
      <td>14.20</td>
      <td>88.96</td>
      <td>NaN</td>
      <td>92.91</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.20</td>
      <td>15.51</td>
      <td>122.67</td>
      <td>36.32</td>
      <td>15.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>124.72</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>9.30</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.07</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.619538</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.75</td>
      <td>99.83</td>
      <td>129.44</td>
      <td>42.50</td>
      <td>14.20</td>
      <td>126.46</td>
      <td>NaN</td>
      <td>98.13</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.20</td>
      <td>35.39</td>
      <td>173.46</td>
      <td>37.30</td>
      <td>15.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>304.73</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>9.30</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.07</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.905600</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5</td>
      <td>12.160155</td>
      <td>0.712868</td>
      <td>75.141654</td>
      <td>75.061504</td>
      <td>42.821163</td>
      <td>14.231240</td>
      <td>99.213158</td>
      <td>1.849922</td>
      <td>96.837895</td>
      <td>2.534574</td>
      <td>83.771154</td>
      <td>3.808992</td>
      <td>22.834015</td>
      <td>143.588947</td>
      <td>37.342256</td>
      <td>10.195039</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.665977</td>
      <td>121.621318</td>
      <td>NaN</td>
      <td>38.225208</td>
      <td>97.278942</td>
      <td>7.341635</td>
      <td>6.567364</td>
      <td>NaN</td>
      <td>0.855079</td>
      <td>29.580000</td>
      <td>0.01</td>
      <td>36.000</td>
      <td>58.00</td>
      <td>1.3</td>
      <td>30.981461</td>
      <td>NaN</td>
      <td>0.538676</td>
      <td>17.183755</td>
      <td>3.256115</td>
      <td>0.049768</td>
      <td>17.953965</td>
      <td>6.938271</td>
      <td>3.263822</td>
      <td>1.568429</td>
      <td>23.095705</td>
      <td>0.251668</td>
      <td>1.794488</td>
      <td>0.544217</td>
      <td>16.726549</td>
      <td>0.379603</td>
      <td>5.684222</td>
      <td>26.486614</td>
      <td>0.554015</td>
      <td>1.514849</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.244319</td>
      <td>11.195427</td>
      <td>NaN</td>
      <td>6.224882</td>
      <td>2.014454</td>
      <td>0.073816</td>
      <td>2.751945</td>
      <td>NaN</td>
      <td>0.079268</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.982443</td>
      <td>NaN</td>
      <td>0.092515</td>
      <td>4.809614</td>
      <td>7.85</td>
      <td>0.62</td>
      <td>46.62</td>
      <td>60.29</td>
      <td>36.22</td>
      <td>11.77</td>
      <td>61.15</td>
      <td>1.49</td>
      <td>90.87</td>
      <td>2.08</td>
      <td>73.72</td>
      <td>3.21</td>
      <td>9.53</td>
      <td>89.44</td>
      <td>35.94</td>
      <td>7.41</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.39</td>
      <td>96.87</td>
      <td>NaN</td>
      <td>24.69</td>
      <td>92.83</td>
      <td>7.25</td>
      <td>0.93</td>
      <td>NaN</td>
      <td>0.66</td>
      <td>29.58</td>
      <td>0.01</td>
      <td>36.00</td>
      <td>58.00</td>
      <td>1.3</td>
      <td>25.1</td>
      <td>NaN</td>
      <td>0.359089</td>
      <td>10.101266</td>
      <td>15.25</td>
      <td>0.79</td>
      <td>119.31</td>
      <td>90.65</td>
      <td>47.05</td>
      <td>16.28</td>
      <td>159.52</td>
      <td>2.28</td>
      <td>100.11</td>
      <td>3.66</td>
      <td>130.94</td>
      <td>4.42</td>
      <td>30.98</td>
      <td>207.72</td>
      <td>38.26</td>
      <td>12.45</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>142.74</td>
      <td>NaN</td>
      <td>51.11</td>
      <td>99.24</td>
      <td>7.51</td>
      <td>8.73</td>
      <td>NaN</td>
      <td>0.89</td>
      <td>29.58</td>
      <td>0.01</td>
      <td>36.00</td>
      <td>58.00</td>
      <td>1.3</td>
      <td>45.94</td>
      <td>NaN</td>
      <td>0.831299</td>
      <td>22.177419</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6</td>
      <td>26.554082</td>
      <td>0.467959</td>
      <td>NaN</td>
      <td>61.949000</td>
      <td>29.122245</td>
      <td>9.604286</td>
      <td>82.788000</td>
      <td>2.188980</td>
      <td>97.344800</td>
      <td>3.171837</td>
      <td>395.151020</td>
      <td>4.005306</td>
      <td>18.338800</td>
      <td>134.208600</td>
      <td>37.135417</td>
      <td>14.732653</td>
      <td>NaN</td>
      <td>113.110408</td>
      <td>NaN</td>
      <td>80.855102</td>
      <td>24.154694</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>8.218980</td>
      <td>611.00</td>
      <td>NaN</td>
      <td>38.032041</td>
      <td>NaN</td>
      <td>24.326</td>
      <td>70.18</td>
      <td>0.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.471018</td>
      <td>57.793576</td>
      <td>6.884190</td>
      <td>0.146472</td>
      <td>NaN</td>
      <td>5.563790</td>
      <td>0.869107</td>
      <td>0.237171</td>
      <td>16.465945</td>
      <td>0.196980</td>
      <td>2.092771</td>
      <td>0.585888</td>
      <td>20.687366</td>
      <td>0.308289</td>
      <td>2.266595</td>
      <td>20.055612</td>
      <td>0.590178</td>
      <td>2.146741</td>
      <td>NaN</td>
      <td>3.444620</td>
      <td>NaN</td>
      <td>6.192235</td>
      <td>1.964747</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.196980</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>5.530593</td>
      <td>NaN</td>
      <td>0.846223</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.086874</td>
      <td>3.421685</td>
      <td>19.60</td>
      <td>0.32</td>
      <td>NaN</td>
      <td>50.53</td>
      <td>28.47</td>
      <td>9.39</td>
      <td>51.80</td>
      <td>1.99</td>
      <td>92.95</td>
      <td>2.58</td>
      <td>377.25</td>
      <td>3.63</td>
      <td>13.90</td>
      <td>92.72</td>
      <td>35.95</td>
      <td>12.60</td>
      <td>NaN</td>
      <td>109.77</td>
      <td>NaN</td>
      <td>74.60</td>
      <td>22.17</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>8.02</td>
      <td>611.00</td>
      <td>NaN</td>
      <td>33.73</td>
      <td>NaN</td>
      <td>23.91</td>
      <td>70.18</td>
      <td>0.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.322052</td>
      <td>54.475410</td>
      <td>33.23</td>
      <td>0.61</td>
      <td>NaN</td>
      <td>73.38</td>
      <td>30.55</td>
      <td>9.99</td>
      <td>130.20</td>
      <td>2.38</td>
      <td>100.17</td>
      <td>3.74</td>
      <td>430.45</td>
      <td>4.44</td>
      <td>22.63</td>
      <td>172.93</td>
      <td>38.19</td>
      <td>17.44</td>
      <td>NaN</td>
      <td>116.59</td>
      <td>NaN</td>
      <td>86.86</td>
      <td>26.06</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>8.41</td>
      <td>611.00</td>
      <td>NaN</td>
      <td>48.15</td>
      <td>NaN</td>
      <td>25.99</td>
      <td>70.18</td>
      <td>0.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.758520</td>
      <td>61.250000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>15139</th>
      <td>21628</td>
      <td>14.000000</td>
      <td>0.700000</td>
      <td>49.540741</td>
      <td>103.457778</td>
      <td>32.625185</td>
      <td>11.900000</td>
      <td>72.065926</td>
      <td>NaN</td>
      <td>94.868148</td>
      <td>NaN</td>
      <td>178.000000</td>
      <td>3.947778</td>
      <td>22.161481</td>
      <td>103.968148</td>
      <td>36.998889</td>
      <td>16.200000</td>
      <td>NaN</td>
      <td>104.014074</td>
      <td>NaN</td>
      <td>130.000000</td>
      <td>20.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>29.100000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.038000</td>
      <td>20.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>4.899731</td>
      <td>4.839157</td>
      <td>0.593946</td>
      <td>0.000000</td>
      <td>10.556669</td>
      <td>NaN</td>
      <td>1.951857</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>0.013397</td>
      <td>5.525944</td>
      <td>7.127929</td>
      <td>0.508386</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>1.884551</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.071324</td>
      <td>0.000000</td>
      <td>14.00</td>
      <td>0.70</td>
      <td>43.00</td>
      <td>94.72</td>
      <td>31.64</td>
      <td>11.90</td>
      <td>40.90</td>
      <td>NaN</td>
      <td>88.11</td>
      <td>NaN</td>
      <td>178.00</td>
      <td>3.94</td>
      <td>10.79</td>
      <td>92.94</td>
      <td>36.21</td>
      <td>16.20</td>
      <td>NaN</td>
      <td>102.92</td>
      <td>NaN</td>
      <td>130.00</td>
      <td>20.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>29.10</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.846464</td>
      <td>20.000000</td>
      <td>14.00</td>
      <td>0.70</td>
      <td>64.98</td>
      <td>112.09</td>
      <td>32.97</td>
      <td>11.90</td>
      <td>86.11</td>
      <td>NaN</td>
      <td>97.84</td>
      <td>NaN</td>
      <td>178.00</td>
      <td>3.97</td>
      <td>32.90</td>
      <td>126.55</td>
      <td>37.67</td>
      <td>16.20</td>
      <td>NaN</td>
      <td>107.14</td>
      <td>NaN</td>
      <td>130.00</td>
      <td>20.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>29.10</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.081773</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>15140</th>
      <td>21629</td>
      <td>23.535714</td>
      <td>1.080000</td>
      <td>54.228182</td>
      <td>90.621455</td>
      <td>27.461905</td>
      <td>9.251905</td>
      <td>83.219091</td>
      <td>2.510000</td>
      <td>99.656364</td>
      <td>NaN</td>
      <td>61.812857</td>
      <td>4.172222</td>
      <td>21.536545</td>
      <td>135.544545</td>
      <td>36.688909</td>
      <td>8.975714</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.400000</td>
      <td>118.397818</td>
      <td>NaN</td>
      <td>38.955185</td>
      <td>98.352222</td>
      <td>7.324815</td>
      <td>7.520370</td>
      <td>NaN</td>
      <td>2.288519</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.678145</td>
      <td>21.818146</td>
      <td>1.993464</td>
      <td>0.105183</td>
      <td>4.459638</td>
      <td>2.390373</td>
      <td>0.436992</td>
      <td>0.198718</td>
      <td>8.077108</td>
      <td>0.000000</td>
      <td>0.625843</td>
      <td>NaN</td>
      <td>2.579482</td>
      <td>0.081000</td>
      <td>3.855742</td>
      <td>17.470132</td>
      <td>0.372527</td>
      <td>0.766332</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>20.257351</td>
      <td>NaN</td>
      <td>1.630796</td>
      <td>0.209516</td>
      <td>0.014108</td>
      <td>3.382747</td>
      <td>NaN</td>
      <td>0.042445</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.080650</td>
      <td>0.271558</td>
      <td>21.83</td>
      <td>0.99</td>
      <td>44.44</td>
      <td>82.96</td>
      <td>26.98</td>
      <td>9.09</td>
      <td>66.31</td>
      <td>2.51</td>
      <td>97.02</td>
      <td>NaN</td>
      <td>58.87</td>
      <td>4.07</td>
      <td>9.88</td>
      <td>100.25</td>
      <td>35.29</td>
      <td>8.32</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.40</td>
      <td>80.11</td>
      <td>NaN</td>
      <td>31.73</td>
      <td>98.28</td>
      <td>7.32</td>
      <td>0.95</td>
      <td>NaN</td>
      <td>2.14</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.535106</td>
      <td>21.508333</td>
      <td>25.81</td>
      <td>1.20</td>
      <td>63.44</td>
      <td>97.10</td>
      <td>27.98</td>
      <td>9.49</td>
      <td>97.45</td>
      <td>2.51</td>
      <td>100.07</td>
      <td>NaN</td>
      <td>64.02</td>
      <td>4.33</td>
      <td>28.28</td>
      <td>169.63</td>
      <td>37.03</td>
      <td>9.85</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.40</td>
      <td>162.05</td>
      <td>NaN</td>
      <td>39.45</td>
      <td>99.07</td>
      <td>7.37</td>
      <td>9.78</td>
      <td>NaN</td>
      <td>2.31</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.838504</td>
      <td>22.050505</td>
    </tr>
    <tr>
      <th>15141</th>
      <td>21630</td>
      <td>42.466667</td>
      <td>4.120606</td>
      <td>62.765714</td>
      <td>94.085476</td>
      <td>30.212195</td>
      <td>10.845714</td>
      <td>83.868810</td>
      <td>2.177317</td>
      <td>97.519524</td>
      <td>4.575152</td>
      <td>296.011429</td>
      <td>4.180000</td>
      <td>11.622857</td>
      <td>123.615238</td>
      <td>36.859048</td>
      <td>21.472857</td>
      <td>-4.222381</td>
      <td>104.863571</td>
      <td>NaN</td>
      <td>111.255238</td>
      <td>18.461212</td>
      <td>36.479762</td>
      <td>53.000000</td>
      <td>7.349762</td>
      <td>7.987879</td>
      <td>NaN</td>
      <td>1.903636</td>
      <td>27.370000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.770192</td>
      <td>10.293502</td>
      <td>2.893742</td>
      <td>0.178745</td>
      <td>4.091623</td>
      <td>3.689259</td>
      <td>2.089079</td>
      <td>0.456342</td>
      <td>7.211074</td>
      <td>0.122373</td>
      <td>1.486316</td>
      <td>0.093378</td>
      <td>28.927859</td>
      <td>0.144005</td>
      <td>2.910789</td>
      <td>12.316088</td>
      <td>0.517663</td>
      <td>1.458195</td>
      <td>1.489483</td>
      <td>0.794664</td>
      <td>NaN</td>
      <td>27.694204</td>
      <td>0.834175</td>
      <td>1.216553</td>
      <td>NaN</td>
      <td>0.022684</td>
      <td>0.029129</td>
      <td>NaN</td>
      <td>0.207542</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.079790</td>
      <td>0.297607</td>
      <td>31.82</td>
      <td>3.47</td>
      <td>48.85</td>
      <td>79.82</td>
      <td>26.22</td>
      <td>9.23</td>
      <td>63.21</td>
      <td>2.11</td>
      <td>92.95</td>
      <td>4.40</td>
      <td>193.59</td>
      <td>4.11</td>
      <td>2.79</td>
      <td>96.03</td>
      <td>35.53</td>
      <td>16.31</td>
      <td>-5.03</td>
      <td>102.05</td>
      <td>NaN</td>
      <td>89.49</td>
      <td>17.06</td>
      <td>34.89</td>
      <td>53.00</td>
      <td>7.32</td>
      <td>7.92</td>
      <td>NaN</td>
      <td>1.42</td>
      <td>27.37</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.601054</td>
      <td>9.170029</td>
      <td>43.56</td>
      <td>4.19</td>
      <td>70.04</td>
      <td>97.33</td>
      <td>31.75</td>
      <td>10.97</td>
      <td>97.55</td>
      <td>2.41</td>
      <td>100.02</td>
      <td>4.82</td>
      <td>303.89</td>
      <td>4.50</td>
      <td>18.11</td>
      <td>150.01</td>
      <td>37.68</td>
      <td>21.87</td>
      <td>0.04</td>
      <td>105.08</td>
      <td>NaN</td>
      <td>170.49</td>
      <td>20.94</td>
      <td>39.11</td>
      <td>53.00</td>
      <td>7.40</td>
      <td>8.00</td>
      <td>NaN</td>
      <td>1.99</td>
      <td>27.37</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.987712</td>
      <td>10.396181</td>
    </tr>
    <tr>
      <th>15142</th>
      <td>21632</td>
      <td>80.246000</td>
      <td>1.800000</td>
      <td>65.857692</td>
      <td>96.119231</td>
      <td>33.046000</td>
      <td>10.938000</td>
      <td>77.470769</td>
      <td>1.994000</td>
      <td>98.196154</td>
      <td>4.474000</td>
      <td>290.938000</td>
      <td>6.108000</td>
      <td>30.662308</td>
      <td>92.554615</td>
      <td>38.930000</td>
      <td>43.398000</td>
      <td>-5.921000</td>
      <td>108.630000</td>
      <td>0.990000</td>
      <td>239.020000</td>
      <td>16.376000</td>
      <td>37.802000</td>
      <td>88.181000</td>
      <td>7.305000</td>
      <td>7.544000</td>
      <td>NaN</td>
      <td>2.010000</td>
      <td>76.500000</td>
      <td>NaN</td>
      <td>519.000</td>
      <td>56.00</td>
      <td>0.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.042062</td>
      <td>43.911111</td>
      <td>1.037960</td>
      <td>0.000000</td>
      <td>5.216346</td>
      <td>4.880952</td>
      <td>1.442338</td>
      <td>0.413247</td>
      <td>5.570530</td>
      <td>0.005164</td>
      <td>2.724957</td>
      <td>0.495742</td>
      <td>9.796066</td>
      <td>0.242981</td>
      <td>4.044771</td>
      <td>5.741656</td>
      <td>0.615305</td>
      <td>2.153379</td>
      <td>1.176997</td>
      <td>0.490578</td>
      <td>0.031623</td>
      <td>0.000000</td>
      <td>0.562874</td>
      <td>5.151450</td>
      <td>13.689373</td>
      <td>0.041966</td>
      <td>0.056804</td>
      <td>NaN</td>
      <td>0.144914</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.081292</td>
      <td>0.000000</td>
      <td>79.04</td>
      <td>1.80</td>
      <td>58.65</td>
      <td>89.91</td>
      <td>31.10</td>
      <td>10.37</td>
      <td>66.00</td>
      <td>1.99</td>
      <td>92.90</td>
      <td>4.09</td>
      <td>283.35</td>
      <td>5.92</td>
      <td>25.36</td>
      <td>85.35</td>
      <td>38.16</td>
      <td>41.73</td>
      <td>-7.12</td>
      <td>108.06</td>
      <td>0.90</td>
      <td>239.02</td>
      <td>15.94</td>
      <td>34.10</td>
      <td>68.35</td>
      <td>7.25</td>
      <td>7.50</td>
      <td>NaN</td>
      <td>1.80</td>
      <td>76.50</td>
      <td>NaN</td>
      <td>519.00</td>
      <td>56.00</td>
      <td>0.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.910573</td>
      <td>43.911111</td>
      <td>81.05</td>
      <td>1.80</td>
      <td>75.78</td>
      <td>102.35</td>
      <td>34.38</td>
      <td>11.31</td>
      <td>86.98</td>
      <td>2.00</td>
      <td>100.25</td>
      <td>5.05</td>
      <td>302.32</td>
      <td>6.42</td>
      <td>38.91</td>
      <td>101.49</td>
      <td>39.68</td>
      <td>45.90</td>
      <td>-3.91</td>
      <td>109.01</td>
      <td>1.00</td>
      <td>239.02</td>
      <td>17.03</td>
      <td>47.03</td>
      <td>97.26</td>
      <td>7.36</td>
      <td>7.61</td>
      <td>NaN</td>
      <td>2.10</td>
      <td>76.50</td>
      <td>NaN</td>
      <td>519.00</td>
      <td>56.00</td>
      <td>0.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.194004</td>
      <td>43.911111</td>
    </tr>
    <tr>
      <th>15143</th>
      <td>21633</td>
      <td>93.810556</td>
      <td>1.200000</td>
      <td>NaN</td>
      <td>90.822778</td>
      <td>29.042222</td>
      <td>10.201333</td>
      <td>72.558333</td>
      <td>1.685000</td>
      <td>98.795556</td>
      <td>3.200000</td>
      <td>167.000000</td>
      <td>4.187222</td>
      <td>17.545000</td>
      <td>108.194444</td>
      <td>36.319412</td>
      <td>16.992000</td>
      <td>NaN</td>
      <td>111.816111</td>
      <td>NaN</td>
      <td>90.000000</td>
      <td>16.867778</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>8.100000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>30.400000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.868208</td>
      <td>77.541667</td>
      <td>1.835882</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>6.026391</td>
      <td>2.952490</td>
      <td>0.033566</td>
      <td>20.329933</td>
      <td>0.009852</td>
      <td>3.708108</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.594928</td>
      <td>2.099718</td>
      <td>24.719105</td>
      <td>0.204648</td>
      <td>0.007746</td>
      <td>NaN</td>
      <td>0.403195</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>0.413245</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.135540</td>
      <td>0.000000</td>
      <td>93.01</td>
      <td>1.20</td>
      <td>NaN</td>
      <td>76.23</td>
      <td>23.18</td>
      <td>10.08</td>
      <td>39.45</td>
      <td>1.68</td>
      <td>84.14</td>
      <td>3.20</td>
      <td>167.00</td>
      <td>3.91</td>
      <td>14.91</td>
      <td>85.04</td>
      <td>36.01</td>
      <td>16.99</td>
      <td>NaN</td>
      <td>110.94</td>
      <td>NaN</td>
      <td>90.00</td>
      <td>15.97</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>8.10</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>30.40</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.583887</td>
      <td>77.541667</td>
      <td>97.80</td>
      <td>1.20</td>
      <td>NaN</td>
      <td>99.29</td>
      <td>31.55</td>
      <td>10.21</td>
      <td>147.23</td>
      <td>1.71</td>
      <td>100.32</td>
      <td>3.20</td>
      <td>167.00</td>
      <td>5.48</td>
      <td>22.79</td>
      <td>170.05</td>
      <td>36.55</td>
      <td>17.02</td>
      <td>NaN</td>
      <td>112.01</td>
      <td>NaN</td>
      <td>90.00</td>
      <td>17.05</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>8.10</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>30.40</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.104143</td>
      <td>77.541667</td>
    </tr>
  </tbody>
</table>
<p>15144 rows × 145 columns</p>
</div>




```python
msno.matrix(df_train_measurement_grouped_stat)
```




    <AxesSubplot:>




    
![png](2.3.EDA_vital_laboratory_files/2.3.EDA_vital_laboratory_46_1.png)
    


- There are still some missing values.
- Drop the variables with more than 20% missing values.


```python
target_col = df_train_measurement_grouped_stat.isna().sum()[(df_train_measurement_grouped_stat.isna().sum() / df_train_measurement_grouped_stat.shape[0]) < 0.2].reset_index()["index"]

```


```python
df_train_measurement_grouped_stat = df_train_measurement_grouped_stat[target_col]
df_test_measurment_grouped_stat = df_test_measurment_grouped_stat[target_col]
```


```python
df_train_measurement_grouped_stat
```

- Now we have 145 -> 77 columns.

- There are some relationships between vital signs and laboratory variables, i.e. 
    -  DBP < MAP < SBP.
    - $ \widehat{MAP} = DBP + 1/3(SBP - DBP)$
- That is, missing values can be infered by combination of other variables.
- So, let's impute the missing values by iterative impute method.


```python
imp = IterativeImputer(max_iter = 10, random_state=42)
imp.fit(df_train_measurement_grouped_stat)
```




<style>#sk-container-id-2 {color: black;background-color: white;}#sk-container-id-2 pre{padding: 0;}#sk-container-id-2 div.sk-toggleable {background-color: white;}#sk-container-id-2 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-container-id-2 label.sk-toggleable__label-arrow:before {content: "▸";float: left;margin-right: 0.25em;color: #696969;}#sk-container-id-2 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-container-id-2 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-container-id-2 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-container-id-2 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-container-id-2 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-container-id-2 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: "▾";}#sk-container-id-2 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-2 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-2 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-container-id-2 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-container-id-2 div.sk-estimator:hover {background-color: #d4ebff;}#sk-container-id-2 div.sk-parallel-item::after {content: "";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-container-id-2 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-2 div.sk-serial::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: 0;}#sk-container-id-2 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;position: relative;}#sk-container-id-2 div.sk-item {position: relative;z-index: 1;}#sk-container-id-2 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;position: relative;}#sk-container-id-2 div.sk-item::before, #sk-container-id-2 div.sk-parallel-item::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: -1;}#sk-container-id-2 div.sk-parallel-item {display: flex;flex-direction: column;z-index: 1;position: relative;background-color: white;}#sk-container-id-2 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-container-id-2 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-container-id-2 div.sk-parallel-item:only-child::after {width: 0;}#sk-container-id-2 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;}#sk-container-id-2 div.sk-label label {font-family: monospace;font-weight: bold;display: inline-block;line-height: 1.2em;}#sk-container-id-2 div.sk-label-container {text-align: center;}#sk-container-id-2 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-container-id-2 div.sk-text-repr-fallback {display: none;}</style><div id="sk-container-id-2" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>IterativeImputer(random_state=42)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br />On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-2" type="checkbox" checked><label for="sk-estimator-id-2" class="sk-toggleable__label sk-toggleable__label-arrow">IterativeImputer</label><div class="sk-toggleable__content"><pre>IterativeImputer(random_state=42)</pre></div></div></div></div></div>




```python
col_names = df_train_measurement_grouped_stat.columns
```


```python
df_train_measurement_grouped_stat = pd.DataFrame(imp.transform(df_train_measurement_grouped_stat),
                                                 columns = col_names)
```


```python
df_test_measurment_grouped_stat = pd.DataFrame(imp.transform(df_test_measurment_grouped_stat),
                                                 columns = col_names)
```


```python
fig, axes = plt.subplots(1, 2, figsize = (12, 5))

msno.matrix(df_train_measurement_grouped_stat, ax = axes[0])
axes[0].set_title("Train data", fontsize = 15)

msno.matrix(df_test_measurment_grouped_stat, ax = axes[1])
axes[1].set_title("Test data", fontsize = 15)
```




    Text(0.5, 1.0, 'Test data')




    
![png](2.3.EDA_vital_laboratory_files/2.3.EDA_vital_laboratory_57_1.png)
    


- Now there is no missing value. 

- Save the tables.


```python
df_train_measurement_grouped_stat.to_csv("../data/df_train_measurement_grouped_stat.csv", index = False)
df_test_measurment_grouped_stat.to_csv("../data/df_test_measurment_grouped_stat.csv", index = False)
```

# 4. Summary

- Make 2 features based on the research (Henry, K. E., Hager, D. N., Pronovost, P. J., and Saria, S. A targeted real-time early warning score (trewscore) for septic shock. Science Translational Medicine 7, 299 (2015), 299ra122–299ra122.)
    - ShockIndex(t) = $\frac{\text{HR(t)}}{SBP(t)}$
    - BUN/CR(t) = $\frac{\text{BUN(t)}}{Creatinine(t)}$

- Incorporate the measurment time information of each variables:
    - Beginning time: Time of the first measurment
    - End time: Time of the last measurment
    - Frequency: Ratio between the total number of the measurment and the maximum hour of the patient
- Also merge the information that shows how long each patient has stayed (the maximum hour of each patient).

- Because each variable is recorded only when it is measured, there are many missing values.
- Since variables are measured in several time for each patient, this is the dependent dataset. That is, there are correlations between measured values from same patient.
- So use summary statistics like minimum, maximum, mean, and standard deviation for each variable instead of several measured variables for each patient.

![4.summary](../images/2.3.eda_summary.png)
